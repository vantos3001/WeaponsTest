# WeaponsTest

Weapon - класс оружия
WeaponData - данные об оружии
WeaponState - состояние оружия (текущее кол-во потронов)

AimLogic - логика прицеливания
ShootLogic - логика стрельбы
ShootModeLogic - логика стрельбы по одному патрону или очередями
ReloadLogic - логика перезарядки

Projectile - пуля
ProjectileMovement - движение пули

DamageRule - правило нанесения урона
DamageData - данные о дамаге

Настройки для пистолет одиночными выстрелами:
  Projectile c ForwardMovement
  дамаг -  GeneralDamageData
  нацеливание - AimByTimeData
  перезарядка - GeneralReloadData
  режим стрельбы - SingleShootModeData

Настройки для автомата стреляющего очередями:
  Projectile c ForwardMovement
  дамаг -  GeneralDamageData
  нацеливание - AimByTimeData
  перезарядка - GeneralReloadData
  режим стрельбы - BurstShootModeLogic

Настройки для гранаты, летящей по дуге:
  Projectile c CurveProjectileMovement
  дамаг -  AoeDamageData
  нацеливание - AimByTimeData
  перезарядка - GeneralReloadData
  режим стрельбы - SingleShootModeData


- как расширять систему, добавлять новое оружие\пули?
Ответ:
1) наследоваться от даты и реализовывать новую логику для дамага, нацеливания и тд.
2) можно добавить новую логику по аналогии с наследованием, например нам нужно добавить Дробовик
а) Тогда в ShootLogic (по аналогии с ShootModeLogic) добавить StartShootProjectileLogic (например), наследоваться от этой логики и реализовать для одного патрона и для нескольких. Добавить угол полёта для пули.
б) добавить StraightMovement для пули, чтобы она летело прямо из центра по прямой, и если встретит врага, то делает хит, если нет, то летит определенную дистанцию.
в) наследоваться от ReloadLogic и добавить класс ReloadWithAmmoLogic. В неё пробросить, стреляет ли сейчас пушка, если не стреляет, то добавлять по одному патрону в дробовик.

- как использовать эту систему в проекте (где должны создаваться инстансы, когда
происходит инициализация)
Ответ: Оружие можно инстансить в игроке. Надо вызвать метод Init в классе Weapon.
Если нам надо, использовать оружие, то передать туда ITarget через метод SetTarget() в классе Weapon. В будущем, можно переделать метод под передачу листа таргетов. Например, для стрельбы одновременно по нескольким целям.

- в какой момент можно сменить цель у персонажа? Как себя будет вести оружие
при смене цели?
Ответ: в любой. В момент вызова метода SetTarget, если смениться цель, то пушка начнёт наводится на новую цель и перезаряжаться.

Мои вопросы:
- как нацеливать пушку на врага?
Ответ: Если надо будет, чтобы оружие двигалось к цели (нацеливалось), то это можно сделать в AimLogic пробросив туда положение оружия и нацеливать его постепенно на цель.

- Если надо, чтобы стрельба происходила по ивенту анимации?
Ответ: проблема. Надо будет переробатывать код.

Сейчас пуля двигается только по лерпу. Не обрабатывает коллайдер, не использует предсказание, что делать?
Ответ: наследоваться от ProjectMovement и реализовать логику там.

Проблемы, которые сейчас есть:
- первый выстрел будет с задержкой, а после нацеливания, желательно, чтобы стрелял сразу
- если цель умрёт во время полёта пули, то может быть ошибка
- в aoeDamageRule по идее лучше передевать не Target, а позицию приземления
